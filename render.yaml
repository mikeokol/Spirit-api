services:
  - type: web
    name: spirit-api
    env: node
    region: oregon
    plan: starter
    branch: main
    buildCommand: "npm install"
    startCommand: "npm start"
    envVars:
      - key: OPENAI_API_KEY
        sync: false
      - key: DASH_ADMIN_TOKEN
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: SUPABASE_URL          # âš¡ add these two for reflections DB
        sync: false
      - key: SUPABASE_KEY
        sync: false
    healthCheckPath: "/"
    healthCheckTimeout: 100
    autoDeploy: true
    scaling:
      minInstances: 1
      maxInstances: 3
    runtime:
      nodeVersion: 22.16.0
